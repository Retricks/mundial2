<!DOCTYPE html>
<html>
  <head>
    <title>Mistrzostwa Świata</title>
  </head>
  <body>
    <h1>Mecze</h1>
    <div id="matches"></div>
    <button id="addMatchButton">Dodaj mecz</button>
    <h1>Statystyki</h1>
    <table id="stats"></table>

    <script>
      // Tablica z meczami
      const matches = [];

// Funkcja do odświeżania listy meczów i statystyk
function refreshMatchesAndStats() {
  // Wyczyszczenie listy meczów
  document.getElementById("matches").innerHTML = "";

  // Wypełnienie listy meczów danymi
  for (const match of matches) {
    const { team1, team2, score1, score2 } = match;
    const matchRow = document.createElement("tr");
    matchRow.innerHTML = `
      <td>${team1}</td>
      <td>${score1 !== undefined ? score1 : ""}</td>
      <td>${team2}</td>
      <td>${score2 !== undefined ? score2 : ""}</td>
      <td>
        <button onclick="showScoreInput(${matches.indexOf(match)})">
          ${score1 !== undefined ? "Edytuj" : "Dodaj"}
        </button>
      </td>
    `;
    document.getElementById("matches").appendChild(matchRow);
  }

  // Obiekt zawierający statystyki drużyn
  const stats = {};
  for (const match of matches) {
    const { team1, team2, score1, score2 } = match;
    // Jeśli drużyna jeszcze nie istnieje w statystykach, dodaj ją
    if (!stats[team1]) {
      stats[team1] = { team: team1, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
    }
    if (!stats[team2]) {
      stats[team2] = { team: team2, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
    }
    // Jeśli wynik meczu jest znany, zaktualizuj statystyki drużyn
    if (score1 !== undefined) {
      stats[team1].played += 1;
      stats[team2].played += 1;
      if (score1 > score2) {
        stats[team1].won += 1;
        stats[team2].lost += 1;
        stats[team1].points += 3;
      } else if (score1 < score2) {
        stats[team1].lost += 1;
        stats[team2].won += 1;
        stats[team2].points += 3;
      } else {
        stats[team1].drawn += 1;
        stats[team2].drawn += 1;
        stats[team1].points += 1;
        stats[team2].points += 1;
      }
    }
  }
  // Wyczyszczenie tabeli statystyk
  document.getElementById("stats").innerHTML = `
    <tr>
      <th>Drużyna</th>
      <th>RM</th>
      <th>W</th>
      <th>R</th>
      <th>P</th>
      <th>Pkt</th>
    </tr>
  `;

  // Wypełnienie tabeli statystyk danymi
  for (const team in stats) {
    const { played, won, drawn, lost, points } = stats[team];
    const statsRow = document.createElement("tr");
    statsRow.innerHTML = `
      <td>${team}</td>
      <td>${played}</td>
      <td>${won}</td>
      <td>${drawn}</td>
      <td>${lost}</td>
      <td>${points}</td>
    `;
    document.getElementById("stats").appendChild(statsRow);
  }

  // Pokazanie przycisku "Dodaj mecz"
  document.getElementById("addMatchButton").style.display = "block";
}



      // Funkcja do odświeżania statystyk drużyn
      function refreshStats() {
        // Wyczyszczenie tabeli statystyk
        document.getElementById("stats").innerHTML = `
          <tr>
            <th>Drużyna</th>
            <th>RM</th>
            <th>W</th>
            <th>R</th>
            <th>P</th>
            <th>Pkt</th>
</tr>
  `;
          // Obiekt zawierający statystyki drużyn
          const stats = {};
          for (const match of matches) {
            const { team1, team2, score1, score2 } = match;
            // Jeśli drużyna jeszcze nie istnieje w statystykach, dodaj ją
            if (!stats[team1]) {
              stats[team1] = { team: team1, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
            }
            if (!stats[team2]) {
              stats[team2] = { team: team2, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
            }
            // Jeśli wynik meczu jest znany, zaktualizuj statystyki drużyn
            if (score1 !== undefined) {
              stats[team1].played += 1;
              stats[team2].played += 1;
              if (score1 > score2) {
                stats[team1].won += 1;
                stats[team2].lost += 1;
                stats[team1].points += 3;
              } else if (score1 < score2) {
                stats[team1].lost += 1;
                stats[team2].won += 1;
                stats[team2].points += 3;
              } else {
                stats[team1].drawn += 1;
                stats[team2].drawn += 1;
                stats[team1].points += 1;
                stats[team2].points += 1;
              }
            }
          }
          // Wypełnienie tabeli statystyk danymi
          for (const stat of Object.values(stats)) {
            const { team, played, won, drawn, lost, points } = stat;
            const statRow = document.createElement("tr");
            statRow.innerHTML = `
              <td>${team}</td>
              <td>${played}</td>
              <td>${won}</td>
              <td>${drawn}</td>
              <td>${lost}</td>
              <td>${points}</td>
            `;
            document.getElementById("stats").appendChild(statRow);
          }
        }

// Funkcja do dodawania meczu
function addMatch() {
  const team1 = prompt("Nazwa drużyny 1:", "");
  const team2 = prompt("Nazwa drużyny 2:", "");

  // Sprawdzenie, czy podano nazwy drużyn
  if (team1 && team2) {
    // Dodanie nowego meczu do listy
    matches.push({ team1, team2 });
    // Odświeżenie listy meczów i statystyk
    refreshMatchesAndStats();
  }
  // Ukrycie przycisku "Dodaj mecz"
  document.getElementById("addMatchButton").style.display = "none";
}


        // Aktualizacja listy meczów i statystyk po załadowaniu strony
        refreshMatchesAndStats();

        // Dodanie obsługi kliknięcia na przycisk "Dodaj mecz"
        document.getElementById("addMatchButton").onclick = addMatch;
    </script>
  </body>
</html>

