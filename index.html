<!DOCTYPE html>
<html>
  <head>
    <title>Mistrzostwa Świata</title>
  </head>
  <body>
    <h1>Mistrzostwa Świata</h1>
    <h2>Mecze</h2>
    <ul id="matches">
      <!-- Tutaj zostaną wyświetlone mecze -->
    </ul>
    <h2>Statystyki drużyn</h2>
    <table id="stats">
      <tr>
        <th>Drużyna</th>
        <th>Mecze</th>
        <th>Zwycięstwa</th>
        <th>Remisy</th>
        <th>Porażki</th>
        <th>Punkty</th>
      </tr>
      <!-- Tutaj zostaną wyświetlone statystyki -->
    </table>
    <script>
      // Funkcja do odświeżenia listy meczów i statystyk
      function refreshMatchesAndStats() {
        // Pobranie meczów z pamięci przeglądarki
        const matches = JSON.parse(localStorage.getItem("matches")) || [];

        // Wyczyszczenie listy meczów
        document.getElementById("matches").innerHTML = "";

        // Dodanie meczów do listy
        for (const match of matches) {
          const { team1, team2, score1, score2 } = match;
          const matchElement = document.createElement("li");
          matchElement.innerHTML = `${team1} ${score1} : ${score2} ${team2}`;

          // Dodanie przycisku do edycji wyniku
          const editButton = document.createElement("button");
          editButton.innerText = "Edytuj";
          editButton.onclick = () => {
            // Funkcja do edycji wyniku meczu
            function editMatch(match) {
              const team1 = prompt("Nazwa drużyny 1:", match.team1);
              const team2 = prompt("Nazwa drużyny 2:", match.team2);
              const score1 = prompt("Wynik drużyny 1:", match.score1);
              const score2 = prompt("Wynik drużyny 2:", match.score2);
              // Sprawdzenie, czy podano poprawne dane
              if (team1 && team2 && score1 && score2) {
                // Aktualizacja danych meczu
                match.team1 = team1;
                match.team2 = team2;
                match.score1 = parseInt(score1);
                match.score2 = parseInt(score2);

                // Zapisanie aktualizowanych danych w pamięci przeglądarki
                localStorage.setItem("matches", JSON.stringify(matches));

                // Odświeżenie listy meczów i statystyk
                refreshMatchesAndStats();
              }
            }

            // Wywołanie funkcji do edycji wyniku meczu
            editMatch(match);
          };
          matchElement.appendChild(editButton);

          // Dodanie elementu z meczem do listy
          document.getElementById("matches").appendChild(matchElement);
        }

        // Wyczyszczenie tabeli z statystykami
        document.getElementById("stats").innerHTML = "";

        // Stworzenie słownika zawierającego statystyki drużyn
        const stats = {};
        for (const match of matches) {
          const { team1, team2, score1, score2 } = match;
          if (!stats[team1]) {
            stats[team1] = { team: team1, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
          }
          if (!stats[team2]) {
            stats[team2] = { team: team2, played: 0, won: 0, drawn: 0, lost: 0, points: 0 };
          }
          stats[team1].played += 1;
          stats[team2].played += 1;
          if (score1 > score2) {
            stats[team1].won += 1;
            stats[team2].lost += 1;
            stats[team1].points += 3;
          } else if (score1 < score2) {
            stats[team1].lost += 1;
            stats[team2].won += 1;
            stats[team2].points += 3;
          } else {
            stats[team1].drawn += 1;
            stats[team2].drawn += 1;
            stats[team1].points += 1;
            stats[team2].points += 1;
          }
        }

        // Wyświetlenie statystyk drużyn w tabeli
        for (const team of Object.values(stats)) {
          const { team: teamName, played, won, drawn, lost, points } = team;
          const statsRow = document.createElement("tr");
          statsRow.innerHTML = `
            <td>${teamName}</td>
            <td>${played}</td>
            <td>${won}</td>
            <td>${drawn}</td>
            <td>${lost}</td>
            <td>${points}</td>
          `;
          document.getElementById("stats").appendChild(statsRow);
        }
      }

      // Odświeżenie listy meczów i statystyk po załadowaniu strony
      refreshMatchesAndStats();
    </script>
  </body>
</html>
